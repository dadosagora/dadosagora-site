---
title: Conversor de Temperatura
layout: layout.njk
---

<h2>Conversor de Temperatura</h2>

<label for="tVal">Valor:</label>
<input id="tVal" type="number" step="0.01" value="0">

<div class="grid">
  <div>
    <label for="tFrom">De:</label>
    <select id="tFrom">
      <option value="C">Celsius (°C)</option>
      <option value="F">Fahrenheit (°F)</option>
      <option value="K">Kelvin (K)</option>
    </select>
  </div>

  <div>
    <label for="tTo">Para:</label>
    <select id="tTo">
      <option value="C">Celsius (°C)</option>
      <option value="F">Fahrenheit (°F)</option>
      <option value="K">Kelvin (K)</option>
    </select>
  </div>
</div>

<hr>

<h3>Sensação&nbsp;térmica (opcional)</h3>
<div class="grid">
  <div>
    <label for="wind">Vento&nbsp;(km/h):</label>
    <input id="wind" type="number" step="0.1" value="10">
  </div>
  <div>
    <label for="rh">Umidade&nbsp;(%):</label>
    <input id="rh" type="number" step="1" value="50" min="0" max="100">
  </div>
</div>

<button id="btnConv">Converter</button>
<button id="btnSens" class="secondary">Calcular sensação</button>

<p id="tResult" class="lead">0,00</p>
<p id="tSens"   class="lead"></p>
<p id="tFormula" class="small"></p>

<script>
/* ---------- funções utilitárias ---------- */
function convTemp(v,f,t){
  let c = f==="C"? v : f==="F"? (v-32)/1.8 : v-273.15;
  return t==="C"? c : t==="F"? c*1.8+32 : c+273.15;
}                                   // °C + km/h
const windChill = (c,w)=>13.12+0.6215*c-11.37*Math.pow(w,0.16)+0.3965*c*Math.pow(w,0.16);
// °C + %
function heatIndex(c,rh){
  const f=c*1.8+32;
  const hiF=-42.379+2.04901523*f+10.14333127*rh-0.22475541*f*rh-6.83783e-3*f*f
            -5.481717e-2*rh*rh+1.22874e-3*f*f*rh+8.5282e-4*f*rh*rh-1.99e-6*f*f*rh*rh;
  return (hiF-32)/1.8;
}
const fmt=n=>n.toLocaleString("pt-BR",{minimumFractionDigits:2});

/* ---------- elementos ---------- */
const tVal  = document.getElementById("tVal");
const tFrom = document.getElementById("tFrom");
const tTo   = document.getElementById("tTo");
const wind  = document.getElementById("wind");
const rh    = document.getElementById("rh");
const res   = document.getElementById("tResult");
const sens  = document.getElementById("tSens");
const form  = document.getElementById("tFormula");

/* ---------- conversão ---------- */
btnConv.onclick = () => {
  const v=parseFloat(tVal.value)||0;
  const f=tFrom.value, t=tTo.value;
  const r=convTemp(v,f,t);
  res.textContent = fmt(r)+" "+(t==="C"?"°C":t==="F"?"°F":"K");
  form.textContent=`${fmt(v)} ${f} → ${fmt(r)} ${t}`;
  sens.textContent="";
};

/* ---------- sensação térmica ---------- */
btnSens.onclick = () => {
  const tempC = parseFloat(tVal.value)||0;
  const w = parseFloat(wind.value)||0;
  const u = parseFloat(rh.value)||0;

  let txt="";
  if(tempC<=10 && w>=4.8){
    txt = "Wind-chill: "+fmt(windChill(tempC,w))+" °C";
  }else if(tempC>=27 && u>=40){
    txt = "Heat-index: "+fmt(heatIndex(tempC,u))+" °C";
  }else{
    txt = "Sensação ≈ temperatura real";
  }
  sens.textContent=txt;
};
</script>
