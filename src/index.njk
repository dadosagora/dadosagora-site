---
title: Conversor de Moedas Online
layout: layout.njk
---

<!-- Título da página -->
<h1 class="text-3xl sm:text-4xl font-extrabold text-center text-gray-900">
  Conversor de Moedas Online
</h1>
<p class="text-center text-gray-600 mt-1">
  Cotações em tempo real e conversões precisas.
</p>

<!-- Cotações agora -->
<section class="mt-8">
  <h2 class="text-xl font-bold mb-2">Cotações agora</h2>
  <p class="text-sm text-gray-700 mb-4">
    Converta moedas em tempo real: dólar, euro, libra, peso argentino, iene, bitcoin e outras.
    Ideal para viagens, finanças e estudos.
  </p>

  <ul id="rates-list" class="text-gray-800 list-disc pl-5 space-y-1 text-sm">
    <li>Dólar: R$ <span class="value" data-code="USDBRL" data-decimals="2">—</span></li>
    <li>Euro: R$ <span class="value" data-code="EURBRL" data-decimals="2">—</span></li>
    <li>Peso Argentino: R$ <span class="value" data-code="ARSBRL" data-decimals="4">—</span></li>
    <li>Libra: R$ <span class="value" data-code="GBPBRL" data-decimals="2">—</span></li>
    <li>Dólar Canadense: R$ <span class="value" data-code="CADBRL" data-decimals="2">—</span></li>
    <li>Dólar Australiano: R$ <span class="value" data-code="AUDBRL" data-decimals="2">—</span></li>
    <li>Franco Suíço: R$ <span class="value" data-code="CHFBRL" data-decimals="2">—</span></li>
    <li>Iene: R$ <span class="value" data-code="JPYBRL" data-decimals="4">—</span></li>
    <li>Bitcoin: R$ <span class="value" data-code="BTCBRL" data-decimals="6">—</span></li>
  </ul>

  <p class="text-xs text-gray-500 mt-2">
    Fonte: <a href="https://docs.awesomeapi.com.br/api-de-moedas" target="_blank" rel="noopener" class="text-blue-600 underline">AwesomeAPI</a>
  </p>
</section>

<!-- Conversor -->
<section class="mt-10">
  <h2 class="text-xl font-bold mb-3">Conversor de valores</h2>

  <!-- Valor -->
  <label for="amount" class="block text-sm mb-1">Valor:</label>
  <input
    id="amount"
    type="number"
    step="0.01"
    min="0"
    value="100"
    class="w-full p-3 border border-gray-300 rounded-lg bg-white"
  />

  <!-- De / Para -->
  <div class="grid mt-3">
    <div>
      <label for="from" class="block text-sm mb-1">De:</label>
      <select id="from" class="w-full p-3 border border-gray-300 rounded-lg bg-white">
        <option value="BRL">Real (BRL)</option>
        <option value="USDBRL">Dólar (USD)</option>
        <option value="EURBRL">Euro (EUR)</option>
        <option value="ARSBRL">Peso (ARS)</option>
        <option value="GBPBRL">Libra (GBP)</option>
        <option value="CADBRL">Dólar CAD (CAD)</option>
        <option value="AUDBRL">Dólar AUD (AUD)</option>
        <option value="CHFBRL">Franco (CHF)</option>
        <option value="JPYBRL">Iene (JPY)</option>
        <option value="BTCBRL">Bitcoin (BTC)</option>
      </select>
    </div>

    <div>
      <label for="to" class="block text-sm mb-1">Para:</label>
      <select id="to" class="w-full p-3 border border-gray-300 rounded-lg bg-white">
        <option value="BRL">Real (BRL)</option>
        <option value="USDBRL">Dólar (USD)</option>
        <option value="EURBRL">Euro (EUR)</option>
        <option value="ARSBRL">Peso (ARS)</option>
        <option value="GBPBRL">Libra (GBP)</option>
        <option value="CADBRL">Dólar CAD (CAD)</option>
        <option value="AUDBRL">Dólar AUD (AUD)</option>
        <option value="CHFBRL">Franco (CHF)</option>
        <option value="JPYBRL">Iene (JPY)</option>
        <option value="BTCBRL">Bitcoin (BTC)</option>
      </select>
    </div>
  </div>

  <!-- Botão -->
  <button id="convert" class="btn w-full mt-2">Converter</button>

  <!-- Resultado e fórmula -->
  <p id="result" class="lead">R$ 0,00</p>
  <p id="formula"></p>
</section>

<script>
  // rates vem do Eleventy (_data/rates.js)
  const ratesBRL = {{ rates | dump | safe }};

  // Helpers
  const fmt = (n, digits = 2) => Number(n).toLocaleString("pt-BR", {
    minimumFractionDigits: digits, maximumFractionDigits: digits
  });
  function symbol(code){
    const map = { BRL:"R$", USDBRL:"US$", EURBRL:"€", ARSBRL:"ARS$", GBPBRL:"£", CADBRL:"C$", AUDBRL:"A$", CHFBRL:"CHF", JPYBRL:"¥", BTCBRL:"₿" };
    return map[code] || "";
  }
  const toBRL = code => code === "BRL" ? 1 : Number(ratesBRL[code] ?? 0);

  // Preenche cotações sem filtro nunjucks
  (function renderSpotRates(){
    document.querySelectorAll('#rates-list .value').forEach(span => {
      const code = span.getAttribute('data-code');
      const decimals = Number(span.getAttribute('data-decimals') || 2);
      const val = toBRL(code);
      span.textContent = val ? fmt(val, decimals) : '—';
    });
  })();

  // Ação do botão
  document.getElementById("convert").onclick = () => {
    const amount = parseFloat(document.getElementById("amount").value || 0);
    const src    = document.getElementById("from").value;
    const dst    = document.getElementById("to").value;

    const srcRate = toBRL(src);
    const dstRate = toBRL(dst);

    const brl   = amount * srcRate;
    const final = dst === "BRL" ? brl : (dstRate ? brl / dstRate : 0);

    const digits = dst === "BTCBRL" ? 6 : 2;
    const resultadoFinal = `${symbol(dst)} ${fmt(final, digits)}`;
    document.getElementById("result").textContent = resultadoFinal;

    const conta =
      `${symbol(src)} ${fmt(amount)} × ${fmt(srcRate)}` +
      (dst !== "BRL" ? ` ÷ ${fmt(dstRate)}` : "") +
      ` = ${resultadoFinal}`;

    document.getElementById("formula").innerHTML =
      `<strong>Fórmula:</strong> ${conta}`;

    // envio opcional à planilha
    fetch("https://script.google.com/macros/s/AKfycbxvwWDoKH-9UrdA4cQTyxJAfOl9eTT8UOKLv2UCIdPyHKbf-QPSCe5XfrABcFH5cHU/exec", {
      method: "POST",
      mode: "no-cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ pagina: "moedas", resultado: resultadoFinal })
    });
  };
</script>
